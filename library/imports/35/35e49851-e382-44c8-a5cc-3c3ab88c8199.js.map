{"version":3,"sources":["assets\\Settings.js"],"names":["cc","Class","Component","properties","_btnYXOpen","type","Node","_btnYXClose","_btnYYOpen","_btnYYClose","addClickEvent","node","target","component","handler","log","eventHandler","EventHandler","clickEvents","getComponent","Button","push","addSlideEvent","slideEvents","Slider","onLoad","window","AudioMgr","getChildByName","initButtonHandler","slider","refreshVolume","onSlided","parent","name","setSFXVolume","progress","setBGMVolume","btn","active","sfxVolume","yx","width","bgmVolume","yy","onBtnClicked","event","playSFX","sys","localStorage","removeItem","director","loadScene"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n      \r\n        _btnYXOpen:{\r\n            default:null,\r\n            type:cc.Node,\r\n        },\r\n        _btnYXClose:{\r\n            type:cc.Node,\r\n            default:null,\r\n        },\r\n        _btnYYOpen:{\r\n            type:cc.Node,\r\n            default:null,\r\n        },\r\n        _btnYYClose:{\r\n            type:cc.Node,\r\n            default:null,\r\n        },\r\n    },\r\n    addClickEvent:function(node,target,component,handler){\r\n        cc.log(component + \":\" + handler);\r\n        var eventHandler = new cc.Component.EventHandler();\r\n        eventHandler.target = target;\r\n        eventHandler.component = component;\r\n        eventHandler.handler = handler;\r\n\r\n        var clickEvents = node.getComponent(cc.Button).clickEvents;\r\n        clickEvents.push(eventHandler);\r\n    },\r\n    \r\n    addSlideEvent:function(node,target,component,handler){\r\n        var eventHandler = new cc.Component.EventHandler();\r\n        eventHandler.target = target;\r\n        eventHandler.component = component;\r\n        eventHandler.handler = handler;\r\n\r\n        var slideEvents = node.getComponent(cc.Slider).slideEvents;\r\n        slideEvents.push(eventHandler);\r\n    },\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(window.AudioMgr== null){\r\n            cc.log(\"window.AudioMgr== null\")\r\n            return;\r\n        }               \r\n  \r\n        this._btnYXOpen = this.node.getChildByName(\"yinxiao\").getChildByName(\"btn_yx_open\");\r\n        this._btnYXClose = this.node.getChildByName(\"yinxiao\").getChildByName(\"btn_yx_close\");\r\n        this._btnYYOpen = this.node.getChildByName(\"yinyue\").getChildByName(\"btn_yy_open\");\r\n        this._btnYYClose = this.node.getChildByName(\"yinyue\").getChildByName(\"btn_yy_close\");\r\n        \r\n        this.initButtonHandler(this.node.getChildByName(\"btn_close\"));\r\n        this.initButtonHandler(this.node.getChildByName(\"btn_exit\"));\r\n        \r\n        \r\n        this.initButtonHandler(this._btnYXOpen);\r\n        this.initButtonHandler(this._btnYXClose);\r\n        this.initButtonHandler(this._btnYYOpen);\r\n        this.initButtonHandler(this._btnYYClose);\r\n        \r\n\r\n        var slider = this.node.getChildByName(\"yinxiao\").getChildByName(\"progress\");\r\n        this.addSlideEvent(slider,this.node,\"Settings\",\"onSlided\");\r\n        \r\n        var slider = this.node.getChildByName(\"yinyue\").getChildByName(\"progress\");\r\n        this.addSlideEvent(slider,this.node,\"Settings\",\"onSlided\");\r\n        \r\n        this.refreshVolume();\r\n    },\r\n    \r\n    onSlided:function(slider){\r\n        if(slider.node.parent.name == \"yinxiao\"){\r\n            window.AudioMgr.setSFXVolume(slider.progress);\r\n        }\r\n        else if(slider.node.parent.name == \"yinyue\"){\r\n            window.AudioMgr.setBGMVolume(slider.progress);\r\n        }\r\n        this.refreshVolume();\r\n    },\r\n    \r\n    initButtonHandler:function(btn){\r\n        this.addClickEvent(btn,this.node,\"Settings\",\"onBtnClicked\");    \r\n    },\r\n    \r\n    refreshVolume:function(){\r\n        \r\n        this._btnYXClose.active = window.AudioMgr.sfxVolume > 0;\r\n        this._btnYXOpen.active = !this._btnYXClose.active;\r\n        \r\n        var yx = this.node.getChildByName(\"yinxiao\");\r\n        var width = 430 * window.AudioMgr.sfxVolume;\r\n        var progress = yx.getChildByName(\"progress\")\r\n        progress.getComponent(cc.Slider).progress = window.AudioMgr.sfxVolume;\r\n        progress.getChildByName(\"progress\").width = width;  \r\n        //yx.getChildByName(\"btn_progress\").x = progress.x + width;\r\n        \r\n        \r\n        this._btnYYClose.active = window.AudioMgr.bgmVolume > 0;\r\n        this._btnYYOpen.active = !this._btnYYClose.active;\r\n        var yy = this.node.getChildByName(\"yinyue\");\r\n        var width = 430 * window.AudioMgr.bgmVolume;\r\n        var progress = yy.getChildByName(\"progress\");\r\n        progress.getComponent(cc.Slider).progress =window.AudioMgr.bgmVolume; \r\n        \r\n        progress.getChildByName(\"progress\").width = width;\r\n        //yy.getChildByName(\"btn_progress\").x = progress.x + width;\r\n    },\r\n    \r\n    onBtnClicked:function(event){\r\n        window.AudioMgr.playSFX(\"ui_click\")\r\n        cc.log(\"onBtnClicked\",event.target.name)\r\n        if(event.target.name == \"btn_close\"){\r\n            this.node.active = false;\r\n            \r\n        }\r\n        else if(event.target.name == \"btn_exit\"){\r\n            cc.sys.localStorage.removeItem(\"wx_account\");\r\n            cc.sys.localStorage.removeItem(\"wx_sign\");\r\n            cc.director.loadScene(\"StartScene\");\r\n        }\r\n        else if(event.target.name == \"btn_yx_open\"){\r\n            window.AudioMgr.setSFXVolume(1.0);\r\n            this.refreshVolume(); \r\n        }\r\n        else if(event.target.name == \"btn_yx_close\"){\r\n            window.AudioMgr.setSFXVolume(0);\r\n            this.refreshVolume();\r\n        }\r\n        else if(event.target.name == \"btn_yy_open\"){\r\n            window.AudioMgr.setBGMVolume(1);\r\n            this.refreshVolume();\r\n        }\r\n        else if(event.target.name == \"btn_yy_close\"){\r\n            window.AudioMgr.setBGMVolume(0);\r\n            this.refreshVolume();\r\n        }\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}