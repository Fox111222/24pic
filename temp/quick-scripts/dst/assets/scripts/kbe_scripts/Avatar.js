
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/kbe_scripts/Avatar.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '8e5789N1nFFkp/2ekHWYD9D', 'Avatar');
// scripts/kbe_scripts/Avatar.js

"use strict";

/*-----------------------------------------------------------------------------------------
												entity
-----------------------------------------------------------------------------------------*/
var KBEngine = require("kbengine");

KBEngine.Avatar = KBEngine.Entity.extend({
  __init__: function __init__() {
    this._super();

    if (this.isPlayer()) {
      cc.log("window.wx != undefined || window.wc=", window.wx != undefined);

      if (cc.sys.platform == cc.sys.WECHAT_GAME) {
        this.decodeEncryptedData();
      }

      cc.log("KBEngine.Avatar._init_");
      KBEngine.Event.fire("enterScene");
    }
  },
  onSetSpaceData: function onSetSpaceData() {
    cc.log("initSpaceDatainitSpaceDatainitSpaceDatainitSpaceData");
    KBEngine.Event.fire("onSetSpaceData");
  },
  decodeEncryptedData: function decodeEncryptedData() {
    var encryptedData = cc.sys.localStorage.getItem("encryptedData");
    var iv = cc.sys.localStorage.getItem("iv");
    cc.log("encryptedData && iv", encryptedData, iv);

    if (encryptedData && iv) {
      cc.log("decodeEncryptedData");
      this.baseCall("decodeEncryptedData", encryptedData, iv);
    }
  },
  reqChangeReadyState: function reqChangeReadyState() {
    this.cellCall("reqChangeReadyState", 1);
  },
  updateStaus: function updateStaus() {
    this.baseCall("updateStaus");
  },
  playerReadyStateChange: function playerReadyStateChange(eid, state) {
    if (this.isPlayer()) {
      KBEngine.Event.fire("playerReadyStateChange", eid, state);
    }
  },
  quick_chat: function quick_chat(idx) {
    cc.log("quick_chat:cellCall", idx);
    this.cellCall("quick_chat", idx);
  },
  emoji: function emoji(name) {
    cc.log("emoji:cellCall", name);
    this.cellCall("emoji", name);
  },
  iptChat: function iptChat(strstr) {
    cc.log("iptChat:cellCall", strstr);
    this.cellCall("iptChat", strstr);
  },
  onquick_chat: function onquick_chat(eid, idx) {
    cc.log("quick_chat:receive", eid, idx);

    if (this.isPlayer()) {
      KBEngine.Event.fire("onquick_chat", eid, idx);
    }
  },
  onjoinPrivateRoom: function onjoinPrivateRoom(num) {
    cc.log("onjoinPrivateRoom", num);

    if (this.isPlayer()) {
      KBEngine.Event.fire("onjoinPrivateRoom", num);
    }
  },
  onemoji: function onemoji(eid, name) {
    cc.log("emoji:receive", eid, name);

    if (this.isPlayer()) {
      KBEngine.Event.fire("onemoji", eid, name);
    }
  },
  oniptChat: function oniptChat(eid, strstr) {
    cc.log("iptChat:receive", eid, strstr);

    if (this.isPlayer()) {
      KBEngine.Event.fire("oniptChat", eid, strstr);
    }
  },
  onclientMSG: function onclientMSG(msg) {
    if (this.isPlayer()) {
      KBEngine.Event.fire("onclientMSG", msg);
    }
  },
  joinRoom: function joinRoom() {
    KBEngine.INFO_MSG("avatar " + this.id + " join room");
    this.baseCall("joinRoom");
  },
  createPrivateRoom: function createPrivateRoom() {
    KBEngine.INFO_MSG("avatar " + this.id + " createPrivateRoom");
    this.baseCall("createPrivateRoom");
  },
  joinPrivateRoom: function joinPrivateRoom(roomkey) {
    KBEngine.INFO_MSG("avatar " + this.id + " joinPrivateRoom" + roomkey);
    this.baseCall("joinPrivateRoom", roomkey);
  },
  game_begin_push: function game_begin_push(holds) {
    cc.log("Avatar::game_begin_push");

    if (this.isPlayer()) {
      KBEngine.Event.fire("game_begin_push", this);
    }
  },
  onEnterWorld: function onEnterWorld() {
    cc.log("avatar.onEnterWorld.......");

    this._super();

    if (this.isPlayer()) {
      KBEngine.Event.fire("onAvatarEnterWorld", this);
    }
  },
  onEnterWorld2: function onEnterWorld2(eid) {
    cc.log("avatar.onEnterWorld2.......", this.id, KBEngine.app.entity_id); //this._super();

    if (this.isPlayer()) {
      KBEngine.Event.fire("onEnterWorld2", eid);
    }
  },
  onNewTurn: function onNewTurn(eid, second, card1, card2, card3, card4) {
    KBEngine.INFO_MSG("avatar " + eid + " on new turn");
    KBEngine.Event.fire("newTurn", this, eid, second, card1, card2, card3, card4);
  },
  onsureact: function onsureact(strr) {
    this.cellCall("onsureact", strr);
  },
  leaverequest: function leaverequest() {
    KBEngine.INFO_MSG("avatar " + this.id + " leaverequest");
    this.cellCall("leaverequest");
  },
  onsyncsureact: function onsyncsureact(eid, strr) {
    cc.log("avatar::onsyncsureact== ", strr); //KBEngine.Event.fire("onsyncsureact", strr);

    if (this.isPlayer()) {
      KBEngine.Event.fire("oniptChat", eid, strr);
    }
  },
  newTurn: function newTurn() {
    this.cellCall("newTurn");
  },
  onupdateGamestates: function onupdateGamestates(curID, time) {
    KBEngine.INFO_MSG("onupdateGamestates " + curID + "/" + time);
    KBEngine.Event.fire("onupdateGamestates", curID, time);
  },
  onotherNetcut: function onotherNetcut(avatarID) {
    KBEngine.INFO_MSG("avatar " + avatarID + " Netcut");
    KBEngine.Event.fire("onotherNetcut", avatarID);
  },
  onDie: function onDie(avatarID) {
    KBEngine.INFO_MSG("avatar " + avatarID + " die");
    KBEngine.Event.fire("onAvatarDie", avatarID);
  },
  onGameOver: function onGameOver(isWin, hitRate, totalTime, totalHarm, score) {
    KBEngine.INFO_MSG("Game is over: avatar " + this.id + "win= " + isWin.toString());
    KBEngine.Event.fire("onGameOver", this.id, isWin, hitRate, totalTime, totalHarm, score);
  },
  updategamestuts: function updategamestuts(num) {
    KBEngine.Event.fire("updategamestuts", num);
  },
  continueGame: function continueGame() {
    this.cellCall("continueGame");
    KBEngine.INFO_MSG("avatar " + this.id + " continue game");
  },
  onContinueGame: function onContinueGame(avatarID) {
    KBEngine.INFO_MSG("avatar " + avatarID + "on continue game, local avatarID=" + this.id); //KBEngine.Event.fire("onAvatarEnterWorld", KBEngine.app.entity_uuid, this.id, this);

    KBEngine.Event.fire("onAvatarEnterWorld", this);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xca2JlX3NjcmlwdHNcXEF2YXRhci5qcyJdLCJuYW1lcyI6WyJLQkVuZ2luZSIsInJlcXVpcmUiLCJBdmF0YXIiLCJFbnRpdHkiLCJleHRlbmQiLCJfX2luaXRfXyIsIl9zdXBlciIsImlzUGxheWVyIiwiY2MiLCJsb2ciLCJ3aW5kb3ciLCJ3eCIsInVuZGVmaW5lZCIsInN5cyIsInBsYXRmb3JtIiwiV0VDSEFUX0dBTUUiLCJkZWNvZGVFbmNyeXB0ZWREYXRhIiwiRXZlbnQiLCJmaXJlIiwib25TZXRTcGFjZURhdGEiLCJlbmNyeXB0ZWREYXRhIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIml2IiwiYmFzZUNhbGwiLCJyZXFDaGFuZ2VSZWFkeVN0YXRlIiwiY2VsbENhbGwiLCJ1cGRhdGVTdGF1cyIsInBsYXllclJlYWR5U3RhdGVDaGFuZ2UiLCJlaWQiLCJzdGF0ZSIsInF1aWNrX2NoYXQiLCJpZHgiLCJlbW9qaSIsIm5hbWUiLCJpcHRDaGF0Iiwic3Ryc3RyIiwib25xdWlja19jaGF0Iiwib25qb2luUHJpdmF0ZVJvb20iLCJudW0iLCJvbmVtb2ppIiwib25pcHRDaGF0Iiwib25jbGllbnRNU0ciLCJtc2ciLCJqb2luUm9vbSIsIklORk9fTVNHIiwiaWQiLCJjcmVhdGVQcml2YXRlUm9vbSIsImpvaW5Qcml2YXRlUm9vbSIsInJvb21rZXkiLCJnYW1lX2JlZ2luX3B1c2giLCJob2xkcyIsIm9uRW50ZXJXb3JsZCIsIm9uRW50ZXJXb3JsZDIiLCJhcHAiLCJlbnRpdHlfaWQiLCJvbk5ld1R1cm4iLCJzZWNvbmQiLCJjYXJkMSIsImNhcmQyIiwiY2FyZDMiLCJjYXJkNCIsIm9uc3VyZWFjdCIsInN0cnIiLCJsZWF2ZXJlcXVlc3QiLCJvbnN5bmNzdXJlYWN0IiwibmV3VHVybiIsIm9udXBkYXRlR2FtZXN0YXRlcyIsImN1cklEIiwidGltZSIsIm9ub3RoZXJOZXRjdXQiLCJhdmF0YXJJRCIsIm9uRGllIiwib25HYW1lT3ZlciIsImlzV2luIiwiaGl0UmF0ZSIsInRvdGFsVGltZSIsInRvdGFsSGFybSIsInNjb3JlIiwidG9TdHJpbmciLCJ1cGRhdGVnYW1lc3R1dHMiLCJjb250aW51ZUdhbWUiLCJvbkNvbnRpbnVlR2FtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7O0FBSUEsSUFBSUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF0Qjs7QUFFQUQsUUFBUSxDQUFDRSxNQUFULEdBQWtCRixRQUFRLENBQUNHLE1BQVQsQ0FBZ0JDLE1BQWhCLENBQXVCO0FBQ2pDQyxFQUFBQSxRQUFRLEVBQUcsb0JBQ1g7QUFDSSxTQUFLQyxNQUFMOztBQUNBLFFBQUcsS0FBS0MsUUFBTCxFQUFILEVBQW9CO0FBQ2hCQyxNQUFBQSxFQUFFLENBQUNDLEdBQUgsQ0FBTyxzQ0FBUCxFQUE4Q0MsTUFBTSxDQUFDQyxFQUFQLElBQWFDLFNBQTNEOztBQUNBLFVBQUdKLEVBQUUsQ0FBQ0ssR0FBSCxDQUFPQyxRQUFQLElBQW1CTixFQUFFLENBQUNLLEdBQUgsQ0FBT0UsV0FBN0IsRUFBeUM7QUFDckMsYUFBS0MsbUJBQUw7QUFDSDs7QUFDRFIsTUFBQUEsRUFBRSxDQUFDQyxHQUFILENBQU8sd0JBQVA7QUFDQVQsTUFBQUEsUUFBUSxDQUFDaUIsS0FBVCxDQUFlQyxJQUFmLENBQW9CLFlBQXBCO0FBQ0g7QUFDSixHQVpnQztBQWFqQ0MsRUFBQUEsY0FBYyxFQUFDLDBCQUFVO0FBQ3JCWCxJQUFBQSxFQUFFLENBQUNDLEdBQUgsQ0FBTyxzREFBUDtBQUNBVCxJQUFBQSxRQUFRLENBQUNpQixLQUFULENBQWVDLElBQWYsQ0FBb0IsZ0JBQXBCO0FBRUgsR0FqQmdDO0FBa0JqQ0YsRUFBQUEsbUJBQW1CLEVBQUUsK0JBQ3JCO0FBQ0ksUUFBSUksYUFBYSxHQUFHWixFQUFFLENBQUNLLEdBQUgsQ0FBT1EsWUFBUCxDQUFvQkMsT0FBcEIsQ0FBNEIsZUFBNUIsQ0FBcEI7QUFDQSxRQUFJQyxFQUFFLEdBQUdmLEVBQUUsQ0FB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QUEsUUFBUSxDQUFDNkMsUUFBVCxDQUFrQixZQUFZMEIsUUFBWixHQUF1QixtQ0FBdkIsR0FBNkQsS0FBS3pCLEVBQXBGLEVBREosQ0FFSTs7QUFDQTlDLElBQUFBLFFBQVEsQ0FBQ2lCLEtBQVQsQ0FBZUMsSUFBZixDQUFvQixvQkFBcEIsRUFBeUMsSUFBekM7QUFDSDtBQXZMZ0MsQ0FBdkIsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZW50aXR5XHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbnZhciBLQkVuZ2luZSA9IHJlcXVpcmUoXCJrYmVuZ2luZVwiKTtcclxuXHJcbktCRW5naW5lLkF2YXRhciA9IEtCRW5naW5lLkVudGl0eS5leHRlbmQoe1xyXG4gICAgICAgIF9faW5pdF9fIDogZnVuY3Rpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICAgICAgaWYodGhpcy5pc1BsYXllcigpKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJ3aW5kb3cud3ggIT0gdW5kZWZpbmVkIHx8IHdpbmRvdy53Yz1cIix3aW5kb3cud3ggIT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgaWYoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5XRUNIQVRfR0FNRSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNvZGVFbmNyeXB0ZWREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwiS0JFbmdpbmUuQXZhdGFyLl9pbml0X1wiKVxyXG4gICAgICAgICAgICAgICAgS0JFbmdpbmUuRXZlbnQuZmlyZShcImVudGVyU2NlbmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uU2V0U3BhY2VEYXRhOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcImluaXRTcGFjZURhdGFpbml0U3BhY2VEYXRhaW5pdFNwYWNlRGF0YWluaXRTcGFjZURhdGFcIilcclxuICAgICAgICAgICAgS0JFbmdpbmUuRXZlbnQuZmlyZShcIm9uU2V0U3BhY2VEYXRhXCIpO1xyXG5cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlY29kZUVuY3J5cHRlZERhdGE6IGZ1bmN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBlbmNyeXB0ZWREYXRhID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZW5jcnlwdGVkRGF0YVwiKTtcclxuICAgICAgICAgICAgdmFyIGl2ID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiaXZcIik7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcImVuY3J5cHRlZERhdGEgJiYgaXZcIixlbmNyeXB0ZWREYXRhICwgaXYpXHJcbiAgICAgICAgICAgIGlmKGVuY3J5cHRlZERhdGEgJiYgaXYpIHtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcImRlY29kZUVuY3J5cHRlZERhdGFcIilcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFzZUNhbGwoXCJkZWNvZGVFbmNyeXB0ZWREYXRhXCIsIGVuY3J5cHRlZERhdGEsIGl2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVxQ2hhbmdlUmVhZHlTdGF0ZTpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0aGlzLmNlbGxDYWxsKFwicmVxQ2hhbmdlUmVhZHlTdGF0ZVwiLDEpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdXBkYXRlU3RhdXM6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdGhpcy5iYXNlQ2FsbChcInVwZGF0ZVN0YXVzXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGxheWVyUmVhZHlTdGF0ZUNoYW5nZTpmdW5jdGlvbihlaWQsc3RhdGUpe1xyXG4gICAgICAgICAgICBpZih0aGlzLmlzUGxheWVyKCkpIHtcclxuICAgICAgICAgICAgICAgIEtCRW5naW5lLkV2ZW50LmZpcmUoXCJwbGF5ZXJSZWFkeVN0YXRlQ2hhbmdlXCIsIGVpZCxzdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSxcclxuICAgICAgICBxdWlja19jaGF0OmZ1bmN0aW9uKGlkeCl7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcInF1aWNrX2NoYXQ6Y2VsbENhbGxcIixpZHgpXHJcbiAgICAgICAgICAgIHRoaXMuY2VsbENhbGwoXCJxdWlja19jaGF0XCIsaWR4KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVtb2ppOmZ1bmN0aW9uKG5hbWUpe1xyXG4gICAgICAgICAgICBjYy5sb2coXCJlbW9qaTpjZWxsQ2FsbFwiLG5hbWUpXHJcbiAgICAgICAgICAgIHRoaXMuY2VsbENhbGwoXCJlbW9qaVwiLG5hbWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXB0Q2hhdDpmdW5jdGlvbihzdHJzdHIpe1xyXG4gICAgICAgICAgICBjYy5sb2coXCJpcHRDaGF0OmNlbGxDYWxsXCIsc3Ryc3RyKVxyXG4gICAgICAgICAgICB0aGlzLmNlbGxDYWxsKFwiaXB0Q2hhdFwiLHN0cnN0cik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbnF1aWNrX2NoYXQ6ZnVuY3Rpb24oZWlkLGlkeCl7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcInF1aWNrX2NoYXQ6cmVjZWl2ZVwiLGVpZCxpZHgpXHJcbiAgICAgICAgICAgIGlmKHRoaXMuaXNQbGF5ZXIoKSkge1xyXG4gICAgICAgICAgICAgICAgS0JFbmdpbmUuRXZlbnQuZmlyZShcIm9ucXVpY2tfY2hhdFwiLCBlaWQsaWR4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25qb2luUHJpdmF0ZVJvb206ZnVuY3Rpb24obnVtKXtcclxuICAgICAgICAgICAgY2MubG9nKFwib25qb2luUHJpdmF0ZVJvb21cIiwgbnVtKVxyXG4gICAgICAgICAgICBpZih0aGlzLmlzUGxheWVyKCkpIHtcclxuICAgICAgICAgICAgICAgIEtCRW5naW5lLkV2ZW50LmZpcmUoXCJvbmpvaW5Qcml2YXRlUm9vbVwiLCBudW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbmVtb2ppOmZ1bmN0aW9uKGVpZCxuYW1lKXtcclxuICAgICAgICAgICAgY2MubG9nKFwiZW1vamk6cmVjZWl2ZVwiLGVpZCxuYW1lKVxyXG4gICAgICAgICAgICBpZih0aGlzLmlzUGxheWVyKCkpIHtcclxuICAgICAgICAgICAgICAgIEtCRW5naW5lLkV2ZW50LmZpcmUoXCJvbmVtb2ppXCIsIGVpZCxuYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25pcHRDaGF0OmZ1bmN0aW9uKGVpZCxzdHJzdHIpe1xyXG4gICAgICAgICAgICBjYy5sb2coXCJpcHRDaGF0OnJlY2VpdmVcIixlaWQsc3Ryc3RyKVxyXG4gICAgICAgICAgICBpZih0aGlzLmlzUGxheWVyKCkpIHtcclxuICAgICAgICAgICAgICAgIEtCRW5naW5lLkV2ZW50LmZpcmUoXCJvbmlwdENoYXRcIiwgZWlkLHN0cnN0cik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uY2xpZW50TVNHOmZ1bmN0aW9uKG1zZyl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuaXNQbGF5ZXIoKSkge1xyXG4gICAgICAgICAgICAgICAgS0JFbmdpbmUuRXZlbnQuZmlyZShcIm9uY2xpZW50TVNHXCIsIG1zZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGpvaW5Sb29tOiBmdW5jdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBLQkVuZ2luZS5JTkZPX01TRyhcImF2YXRhciBcIiArIHRoaXMuaWQgKyBcIiBqb2luIHJvb21cIik7XHJcbiAgICAgICAgICAgIHRoaXMuYmFzZUNhbGwoXCJqb2luUm9vbVwiKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNyZWF0ZVByaXZhdGVSb29tOiBmdW5jdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBLQkVuZ2luZS5JTkZPX01TRyhcImF2YXRhciBcIiArIHRoaXMuaWQgKyBcIiBjcmVhdGVQcml2YXRlUm9vbVwiKTtcclxuICAgICAgICAgICAgdGhpcy5iYXNlQ2FsbChcImNyZWF0ZVByaXZhdGVSb29tXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgam9pblByaXZhdGVSb29tOiBmdW5jdGlvbihyb29ta2V5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgS0JFbmdpbmUuSU5GT19NU0coXCJhdmF0YXIgXCIgKyB0aGlzLmlkICsgXCIgam9pblByaXZhdGVSb29tXCIrIHJvb21rZXkpO1xyXG4gICAgICAgICAgICB0aGlzLmJhc2VDYWxsKFwiam9pblByaXZhdGVSb29tXCIscm9vbWtleSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnYW1lX2JlZ2luX3B1c2g6ZnVuY3Rpb24oaG9sZHMpICAge1xyXG4gICAgICAgICAgICBjYy5sb2coXCJBdmF0YXI6OmdhbWVfYmVnaW5fcHVzaFwiKVxyXG4gICAgICAgICAgICBpZih0aGlzLmlzUGxheWVyKCkpIHtcclxuICAgICAgICAgICAgICAgIEtCRW5naW5lLkV2ZW50LmZpcmUoXCJnYW1lX2JlZ2luX3B1c2hcIix0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25FbnRlcldvcmxkIDogZnVuY3Rpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2MubG9nKFwiYXZhdGFyLm9uRW50ZXJXb3JsZC4uLi4uLi5cIilcclxuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICAgICAgaWYodGhpcy5pc1BsYXllcigpKSB7XHJcbiAgICAgICAgICAgICAgICBLQkVuZ2luZS5FdmVudC5maXJlKFwib25BdmF0YXJFbnRlcldvcmxkXCIsIHRoaXMpO1xyXG4gICAgICAgICAgICB9XHRcdFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25FbnRlcldvcmxkMiA6IGZ1bmN0aW9uKGVpZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcImF2YXRhci5vbkVudGVyV29ybGQyLi4uLi4uLlwiLHRoaXMuaWQgLCBLQkVuZ2luZS5hcHAuZW50aXR5X2lkKVxyXG5cclxuICAgICAgICAgICAgLy90aGlzLl9zdXBlcigpO1xyXG4gICAgICAgICAgICBpZih0aGlzLmlzUGxheWVyKCkpIHtcclxuICAgICAgICAgICAgICAgIEtCRW5naW5lLkV2ZW50LmZpcmUoXCJvbkVudGVyV29ybGQyXCIsIGVpZCk7XHJcbiAgICAgICAgICAgIH1cdFx0XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgIG9uTmV3VHVybiA6IGZ1bmN0aW9uKGVpZCxzZWNvbmQsY2FyZDEsY2FyZDIsY2FyZDMsY2FyZDQpXHJcblx0ICAgIHtcclxuICAgICAgICAgICAgS0JFbmdpbmUuSU5GT19NU0coXCJhdmF0YXIgXCIgKyBlaWQgKyBcIiBvbiBuZXcgdHVyblwiKTtcclxuXHRcdCAgICBLQkVuZ2luZS5FdmVudC5maXJlKFwibmV3VHVyblwiLCB0aGlzLGVpZCxzZWNvbmQsY2FyZDEsY2FyZDIsY2FyZDMsY2FyZDQpO1xyXG4gICAgICAgIH0sIFxyXG4gICAgICAgIG9uc3VyZWFjdDpmdW5jdGlvbihzdHJyKXtcclxuICAgICAgICAgICAgdGhpcy5jZWxsQ2FsbChcIm9uc3VyZWFjdFwiLCBzdHJyKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxlYXZlcmVxdWVzdDpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBLQkVuZ2luZS5JTkZPX01TRyhcImF2YXRhciBcIiArIHRoaXMuaWQgKyBcIiBsZWF2ZXJlcXVlc3RcIik7XHJcbiAgICAgICAgICAgIHRoaXMuY2VsbENhbGwoXCJsZWF2ZXJlcXVlc3RcIik7XHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25zeW5jc3VyZWFjdDpmdW5jdGlvbihlaWQgLCBzdHJyKXtcclxuICAgICAgICAgICAgY2MubG9nKFwiYXZhdGFyOjpvbnN5bmNzdXJlYWN0PT0gXCIsIHN0cnIpO1xyXG4gICAgICAgICAgICAvL0tCRW5naW5lLkV2ZW50LmZpcmUoXCJvbnN5bmNzdXJlYWN0XCIsIHN0cnIpO1xyXG4gICAgICAgICAgICBpZih0aGlzLmlzUGxheWVyKCkpIHtcclxuICAgICAgICAgICAgICAgIEtCRW5naW5lLkV2ZW50LmZpcmUoXCJvbmlwdENoYXRcIiwgZWlkLHN0cnIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbmV3VHVybiA6IGZ1bmN0aW9uKClcclxuXHQgICAge1xyXG4gICAgICAgICAgICB0aGlzLmNlbGxDYWxsKFwibmV3VHVyblwiKTtcclxuICAgICAgICB9LCBcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgb251cGRhdGVHYW1lc3RhdGVzOmZ1bmN0aW9uKGN1cklELHRpbWUpe1xyXG4gICAgICAgICAgICBLQkVuZ2luZS5JTkZPX01TRyhcIm9udXBkYXRlR2FtZXN0YXRlcyBcIiArIGN1cklEICsgXCIvXCIgKyB0aW1lKTtcclxuICAgICAgICAgICAgS0JFbmdpbmUuRXZlbnQuZmlyZShcIm9udXBkYXRlR2FtZXN0YXRlc1wiLCBjdXJJRCx0aW1lKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9ub3RoZXJOZXRjdXQ6IGZ1bmN0aW9uKGF2YXRhcklEKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgS0JFbmdpbmUuSU5GT19NU0coXCJhdmF0YXIgXCIgKyBhdmF0YXJJRCArIFwiIE5ldGN1dFwiKTtcclxuICAgICAgICAgICAgS0JFbmdpbmUuRXZlbnQuZmlyZShcIm9ub3RoZXJOZXRjdXRcIiwgYXZhdGFySUQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25EaWU6IGZ1bmN0aW9uKGF2YXRhcklEKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgS0JFbmdpbmUuSU5GT19NU0coXCJhdmF0YXIgXCIgKyBhdmF0YXJJRCArIFwiIGRpZVwiKTtcclxuICAgICAgICAgICAgS0JFbmdpbmUuRXZlbnQuZmlyZShcIm9uQXZhdGFyRGllXCIsIGF2YXRhcklEKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBvbkdhbWVPdmVyOiBmdW5jdGlvbihpc1dpbiwgaGl0UmF0ZSwgdG90YWxUaW1lLCB0b3RhbEhhcm0sIHNjb3JlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgS0JFbmdpbmUuSU5GT19NU0coXCJHYW1lIGlzIG92ZXI6IGF2YXRhciBcIiArIHRoaXMuaWQgKyBcIndpbj0gXCIgKyBpc1dpbi50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgS0JFbmdpbmUuRXZlbnQuZmlyZShcIm9uR2FtZU92ZXJcIiwgdGhpcy5pZCwgaXNXaW4sIGhpdFJhdGUsIHRvdGFsVGltZSwgdG90YWxIYXJtLCBzY29yZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB1cGRhdGVnYW1lc3R1dHM6ZnVuY3Rpb24obnVtKXtcclxuICAgICAgICAgICAgS0JFbmdpbmUuRXZlbnQuZmlyZShcInVwZGF0ZWdhbWVzdHV0c1wiLG51bSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY29udGludWVHYW1lOiBmdW5jdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmNlbGxDYWxsKFwiY29udGludWVHYW1lXCIpO1xyXG4gICAgICAgICAgICBLQkVuZ2luZS5JTkZPX01TRyhcImF2YXRhciBcIiArIHRoaXMuaWQgKyBcIiBjb250aW51ZSBnYW1lXCIpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG9uQ29udGludWVHYW1lOiBmdW5jdGlvbihhdmF0YXJJRClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEtCRW5naW5lLklORk9fTVNHKFwiYXZhdGFyIFwiICsgYXZhdGFySUQgKyBcIm9uIGNvbnRpbnVlIGdhbWUsIGxvY2FsIGF2YXRhcklEPVwiICsgdGhpcy5pZCk7XHJcbiAgICAgICAgICAgIC8vS0JFbmdpbmUuRXZlbnQuZmlyZShcIm9uQXZhdGFyRW50ZXJXb3JsZFwiLCBLQkVuZ2luZS5hcHAuZW50aXR5X3V1aWQsIHRoaXMuaWQsIHRoaXMpO1xyXG4gICAgICAgICAgICBLQkVuZ2luZS5FdmVudC5maXJlKFwib25BdmF0YXJFbnRlcldvcmxkXCIsdGhpcyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICBcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBcclxuICAgICJdfQ==