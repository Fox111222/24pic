
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/Settings.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '35e49hR44JEyKXMPDq4jIGZ', 'Settings');
// scripts/Settings.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    _btnYXOpen: {
      "default": null,
      type: cc.Node
    },
    _btnYXClose: {
      type: cc.Node,
      "default": null
    },
    _btnYYOpen: {
      type: cc.Node,
      "default": null
    },
    _btnYYClose: {
      type: cc.Node,
      "default": null
    }
  },
  addClickEvent: function addClickEvent(node, target, component, handler) {
    cc.log(component + ":" + handler);
    var eventHandler = new cc.Component.EventHandler();
    eventHandler.target = target;
    eventHandler.component = component;
    eventHandler.handler = handler;
    var clickEvents = node.getComponent(cc.Button).clickEvents;
    clickEvents.push(eventHandler);
  },
  addSlideEvent: function addSlideEvent(node, target, component, handler) {
    var eventHandler = new cc.Component.EventHandler();
    eventHandler.target = target;
    eventHandler.component = component;
    eventHandler.handler = handler;
    var slideEvents = node.getComponent(cc.Slider).slideEvents;
    slideEvents.push(eventHandler);
  },
  // use this for initialization
  onLoad: function onLoad() {
    if (window.AudioMgr == null) {
      cc.log("window.AudioMgr== null");
      return;
    }

    this._btnYXOpen = this.node.getChildByName("yinxiao").getChildByName("btn_yx_open");
    this._btnYXClose = this.node.getChildByName("yinxiao").getChildByName("btn_yx_close");
    this._btnYYOpen = this.node.getChildByName("yinyue").getChildByName("btn_yy_open");
    this._btnYYClose = this.node.getChildByName("yinyue").getChildByName("btn_yy_close");
    this.refreshVolume();
  },
  onSlided: function onSlided(slider) {
    if (slider.node.parent.name == "yinxiao") {
      window.AudioMgr.setSFXVolume(slider.progress);
    } else if (slider.node.parent.name == "yinyue") {
      window.AudioMgr.setBGMVolume(slider.progress);
    }

    this.refreshVolume();
  },
  initButtonHandler: function initButtonHandler(btn) {
    this.addClickEvent(btn, this.node, "Settings", "onBtnClicked");
  },
  refreshVolume: function refreshVolume() {
    this._btnYXClose.active = window.AudioMgr.sfxVolume > 0;
    this._btnYXOpen.active = !this._btnYXClose.active;
    var yx = this.node.getChildByName("yinxiao");
    var width = 430 * window.AudioMgr.sfxVolume;
    var progress = yx.getChildByName("progress");
    progress.getComponent(cc.Slider).progress = window.AudioMgr.sfxVolume; //progress.getChildByName("progress").width = width; 

    progress.getChildByName("progress").scaleX = window.AudioMgr.sfxVolume; //yx.getChildByName("btn_progress").x = progress.x + width;

    this._btnYYClose.active = window.AudioMgr.bgmVolume > 0;
    this._btnYYOpen.active = !this._btnYYClose.active;
    var yy = this.node.getChildByName("yinyue");
    var width = 430 * window.AudioMgr.bgmVolume;
    var progress = yy.getChildByName("progress");
    progress.getComponent(cc.Slider).progress = window.AudioMgr.bgmVolume; //progress.getChildByName("progress").width = width;

    progress.getChildByName("progress").scaleX = window.AudioMgr.bgmVolume; //yy.getChildByName("btn_progress").x = progress.x + width;
  },
  onBtnClicked: function onBtnClicked(event) {
    window.AudioMgr.playSFX("ui_click"); //cc.log("onBtnClicked",event.target.name)

    if (event.target.name == "btn_close") {
      this.node.active = false;
    } else if (event.target.name == "btn_exit") {
      cc.sys.localStorage.removeItem("wx_account");
      cc.sys.localStorage.removeItem("wx_sign");
      cc.director.loadScene("StartScene");
    } else if (event.target.name == "btn_yx_open") {
      window.AudioMgr.setSFXVolume(1.0);
      this.refreshVolume();
    } else if (event.target.name == "btn_yx_close") {
      window.AudioMgr.setSFXVolume(0);
      this.refreshVolume();
    } else if (event.target.name == "btn_yy_open") {
      window.AudioMgr.setBGMVolume(1);
      this.refreshVolume();
    } else if (event.target.name == "btn_yy_close") {
      window.AudioMgr.setBGMVolume(0);
      this.refreshVolume();
    }
  } // called every frame, uncomment this function to activate update callback
  // update: function (dt) {
  // },

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcU2V0dGluZ3MuanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJfYnRuWVhPcGVuIiwidHlwZSIsIk5vZGUiLCJfYnRuWVhDbG9zZSIsIl9idG5ZWU9wZW4iLCJfYnRuWVlDbG9zZSIsImFkZENsaWNrRXZlbnQiLCJub2RlIiwidGFyZ2V0IiwiY29tcG9uZW50IiwiaGFuZGxlciIsImxvZyIsImV2ZW50SGFuZGxlciIsIkV2ZW50SGFuZGxlciIsImNsaWNrRXZlbnRzIiwiZ2V0Q29tcG9uZW50IiwiQnV0dG9uIiwicHVzaCIsImFkZFNsaWRlRXZlbnQiLCJzbGlkZUV2ZW50cyIsIlNsaWRlciIsIm9uTG9hZCIsIndpbmRvdyIsIkF1ZGlvTWdyIiwiZ2V0Q2hpbGRCeU5hbWUiLCJyZWZyZXNoVm9sdW1lIiwib25TbGlkZWQiLCJzbGlkZXIiLCJwYXJlbnQiLCJuYW1lIiwic2V0U0ZYVm9sdW1lIiwicHJvZ3Jlc3MiLCJzZXRCR01Wb2x1bWUiLCJpbml0QnV0dG9uSGFuZGxlciIsImJ0biIsImFjdGl2ZSIsInNmeFZvbHVtZSIsInl4Iiwid2lkdGgiLCJzY2FsZVgiLCJiZ21Wb2x1bWUiLCJ5eSIsIm9uQnRuQ2xpY2tlZCIsImV2ZW50IiwicGxheVNGWCIsInN5cyIsImxvY2FsU3RvcmFnZSIsInJlbW92ZUl0ZW0iLCJkaXJlY3RvciIsImxvYWRTY2VuZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLFVBQVUsRUFBQztBQUNQLGlCQUFRLElBREQ7QUFFUEMsTUFBQUEsSUFBSSxFQUFDTCxFQUFFLENBQUNNO0FBRkQsS0FESDtBQUtSQyxJQUFBQSxXQUFXLEVBQUM7QUFDUkYsTUFBQUEsSUFBSSxFQUFDTCxFQUFFLENB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QUEsRUFBRSxDQUFDb0QsUUFBSCxDQUFZQyxTQUFaLENBQXNCLFlBQXRCO0FBQ0gsS0FKSSxNQUtBLElBQUdOLEtBQUssQ0FBQ25DLE1BQU4sQ0FBYXFCLElBQWIsSUFBcUIsYUFBeEIsRUFBc0M7QUFDdkNQLE1BQUFBLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQk8sWUFBaEIsQ0FBNkIsR0FBN0I7QUFDQSxXQUFLTCxhQUFMO0FBQ0gsS0FISSxNQUlBLElBQUdrQixLQUFLLENBQUNuQyxNQUFOLENBQWFxQixJQUFiLElBQXFCLGNBQXhCLEVBQXVDO0FBQ3hDUCxNQUFBQSxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JPLFlBQWhCLENBQTZCLENBQTdCO0FBQ0EsV0FBS0wsYUFBTDtBQUNILEtBSEksTUFJQSxJQUFHa0IsS0FBSyxDQUFDbkMsTUFBTixDQUFhcUIsSUFBYixJQUFxQixhQUF4QixFQUFzQztBQUN2Q1AsTUFBQUEsTUFBTSxDQUFDQyxRQUFQLENBQWdCUyxZQUFoQixDQUE2QixDQUE3QjtBQUNBLFdBQUtQLGFBQUw7QUFDSCxLQUhJLE1BSUEsSUFBR2tCLEtBQUssQ0FBQ25DLE1BQU4sQ0FBYXFCLElBQWIsSUFBcUIsY0FBeEIsRUFBdUM7QUFDeENQLE1BQUFBLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQlMsWUFBaEIsQ0FBNkIsQ0FBN0I7QUFDQSxXQUFLUCxhQUFMO0FBQ0g7QUFDSixHQTdISSxDQStITDtBQUNBO0FBRUE7O0FBbElLLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuICAgIFxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9idG5ZWE9wZW46e1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9idG5ZWENsb3NlOntcclxuICAgICAgICAgICAgdHlwZTpjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfYnRuWVlPcGVuOntcclxuICAgICAgICAgICAgdHlwZTpjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfYnRuWVlDbG9zZTp7XHJcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZSxcclxuICAgICAgICAgICAgZGVmYXVsdDpudWxsLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgYWRkQ2xpY2tFdmVudDpmdW5jdGlvbihub2RlLHRhcmdldCxjb21wb25lbnQsaGFuZGxlcil7XHJcbiAgICAgICAgY2MubG9nKGNvbXBvbmVudCArIFwiOlwiICsgaGFuZGxlcik7XHJcbiAgICAgICAgdmFyIGV2ZW50SGFuZGxlciA9IG5ldyBjYy5Db21wb25lbnQuRXZlbnRIYW5kbGVyKCk7XHJcbiAgICAgICAgZXZlbnRIYW5kbGVyLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICBldmVudEhhbmRsZXIuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIGV2ZW50SGFuZGxlci5oYW5kbGVyID0gaGFuZGxlcjtcclxuXHJcbiAgICAgICAgdmFyIGNsaWNrRXZlbnRzID0gbm9kZS5nZXRDb21wb25lbnQoY2MuQnV0dG9uKS5jbGlja0V2ZW50cztcclxuICAgICAgICBjbGlja0V2ZW50cy5wdXNoKGV2ZW50SGFuZGxlcik7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBhZGRTbGlkZUV2ZW50OmZ1bmN0aW9uKG5vZGUsdGFyZ2V0LGNvbXBvbmVudCxoYW5kbGVyKXtcclxuICAgICAgICB2YXIgZXZlbnRIYW5kbGVyID0gbmV3IGNjLkNvbXBvbmVudC5FdmVudEhhbmRsZXIoKTtcclxuICAgICAgICBldmVudEhhbmRsZXIudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIGV2ZW50SGFuZGxlci5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgZXZlbnRIYW5kbGVyLmhhbmRsZXIgPSBoYW5kbGVyO1xyXG5cclxuICAgICAgICB2YXIgc2xpZGVFdmVudHMgPSBub2RlLmdldENvbXBvbmVudChjYy5TbGlkZXIpLnNsaWRlRXZlbnRzO1xyXG4gICAgICAgIHNsaWRlRXZlbnRzLnB1c2goZXZlbnRIYW5kbGVyKTtcclxuICAgIH0sXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHdpbmRvdy5BdWRpb01ncj09IG51bGwpe1xyXG4gICAgICAgICAgICBjYy5sb2coXCJ3aW5kb3cuQXVkaW9NZ3I9PSBudWxsXCIpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9ICAgICAgICAgICAgICAgXHJcbiAgXHJcbiAgICAgICAgdGhpcy5fYnRuWVhPcGVuID0gdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKFwieWlueGlhb1wiKS5nZXRDaGlsZEJ5TmFtZShcImJ0bl95eF9vcGVuXCIpO1xyXG4gICAgICAgIHRoaXMuX2J0bllYQ2xvc2UgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJ5aW54aWFvXCIpLmdldENoaWxkQnlOYW1lKFwiYnRuX3l4X2Nsb3NlXCIpO1xyXG4gICAgICAgIHRoaXMuX2J0bllZT3BlbiA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcInlpbnl1ZVwiKS5nZXRDaGlsZEJ5TmFtZShcImJ0bl95eV9vcGVuXCIpO1xyXG4gICAgICAgIHRoaXMuX2J0bllZQ2xvc2UgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJ5aW55dWVcIikuZ2V0Q2hpbGRCeU5hbWUoXCJidG5feXlfY2xvc2VcIik7XHJcbiAgICAgIFxyXG4gICAgICAgIHRoaXMucmVmcmVzaFZvbHVtZSgpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgb25TbGlkZWQ6ZnVuY3Rpb24oc2xpZGVyKXtcclxuICAgICAgICBpZihzbGlkZXIubm9kZS5wYXJlbnQubmFtZSA9PSBcInlpbnhpYW9cIil7XHJcbiAgICAgICAgICAgIHdpbmRvdy5BdWRpb01nci5zZXRTRlhWb2x1bWUoc2xpZGVyLnByb2dyZXNzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihzbGlkZXIubm9kZS5wYXJlbnQubmFtZSA9PSBcInlpbnl1ZVwiKXtcclxuICAgICAgICAgICAgd2luZG93LkF1ZGlvTWdyLnNldEJHTVZvbHVtZShzbGlkZXIucHJvZ3Jlc3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlZnJlc2hWb2x1bWUoKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGluaXRCdXR0b25IYW5kbGVyOmZ1bmN0aW9uKGJ0bil7XHJcbiAgICAgICAgdGhpcy5hZGRDbGlja0V2ZW50KGJ0bix0aGlzLm5vZGUsXCJTZXR0aW5nc1wiLFwib25CdG5DbGlja2VkXCIpOyAgICBcclxuICAgIH0sXHJcblxyXG4gICAgcmVmcmVzaFZvbHVtZTpmdW5jdGlvbigpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2J0bllYQ2xvc2UuYWN0aXZlID0gd2luZG93LkF1ZGlvTWdyLnNmeFZvbHVtZSA+IDA7XHJcbiAgICAgICAgdGhpcy5fYnRuWVhPcGVuLmFjdGl2ZSA9ICF0aGlzLl9idG5ZWENsb3NlLmFjdGl2ZTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgeXggPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJ5aW54aWFvXCIpO1xyXG4gICAgICAgIHZhciB3aWR0aCA9IDQzMCAqIHdpbmRvdy5BdWRpb01nci5zZnhWb2x1bWU7XHJcbiAgICAgICAgdmFyIHByb2dyZXNzID0geXguZ2V0Q2hpbGRCeU5hbWUoXCJwcm9ncmVzc1wiKVxyXG4gICAgICAgIHByb2dyZXNzLmdldENvbXBvbmVudChjYy5TbGlkZXIpLnByb2dyZXNzID0gd2luZG93LkF1ZGlvTWdyLnNmeFZvbHVtZTtcclxuICAgICAgICAvL3Byb2dyZXNzLmdldENoaWxkQnlOYW1lKFwicHJvZ3Jlc3NcIikud2lkdGggPSB3aWR0aDsgXHJcbiAgICAgICAgcHJvZ3Jlc3MuZ2V0Q2hpbGRCeU5hbWUoXCJwcm9ncmVzc1wiKS5zY2FsZVggPXdpbmRvdy5BdWRpb01nci5zZnhWb2x1bWU7IFxyXG4gICAgICAgICBcclxuICAgICAgICAvL3l4LmdldENoaWxkQnlOYW1lKFwiYnRuX3Byb2dyZXNzXCIpLnggPSBwcm9ncmVzcy54ICsgd2lkdGg7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fYnRuWVlDbG9zZS5hY3RpdmUgPSB3aW5kb3cuQXVkaW9NZ3IuYmdtVm9sdW1lID4gMDtcclxuICAgICAgICB0aGlzLl9idG5ZWU9wZW4uYWN0aXZlID0gIXRoaXMuX2J0bllZQ2xvc2UuYWN0aXZlO1xyXG4gICAgICAgIHZhciB5eSA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcInlpbnl1ZVwiKTtcclxuICAgICAgICB2YXIgd2lkdGggPSA0MzAgKiB3aW5kb3cuQXVkaW9NZ3IuYmdtVm9sdW1lO1xyXG4gICAgICAgIHZhciBwcm9ncmVzcyA9IHl5LmdldENoaWxkQnlOYW1lKFwicHJvZ3Jlc3NcIik7XHJcbiAgICAgICAgcHJvZ3Jlc3MuZ2V0Q29tcG9uZW50KGNjLlNsaWRlcikucHJvZ3Jlc3MgPXdpbmRvdy5BdWRpb01nci5iZ21Wb2x1bWU7IFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vcHJvZ3Jlc3MuZ2V0Q2hpbGRCeU5hbWUoXCJwcm9ncmVzc1wiKS53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHByb2dyZXNzLmdldENoaWxkQnlOYW1lKFwicHJvZ3Jlc3NcIikuc2NhbGVYID0gd2luZG93LkF1ZGlvTWdyLmJnbVZvbHVtZTtcclxuICAgICAgICAvL3l5LmdldENoaWxkQnlOYW1lKFwiYnRuX3Byb2dyZXNzXCIpLnggPSBwcm9ncmVzcy54ICsgd2lkdGg7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBvbkJ0bkNsaWNrZWQ6ZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgIHdpbmRvdy5BdWRpb01nci5wbGF5U0ZYKFwidWlfY2xpY2tcIilcclxuICAgICAgICAvL2NjLmxvZyhcIm9uQnRuQ2xpY2tlZFwiLGV2ZW50LnRhcmdldC5uYW1lKVxyXG4gICAgICAgIGlmKGV2ZW50LnRhcmdldC5uYW1lID09IFwiYnRuX2Nsb3NlXCIpe1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGV2ZW50LnRhcmdldC5uYW1lID09IFwiYnRuX2V4aXRcIil7XHJcbiAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcInd4X2FjY291bnRcIik7XHJcbiAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcInd4X3NpZ25cIik7XHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShcIlN0YXJ0U2NlbmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoZXZlbnQudGFyZ2V0Lm5hbWUgPT0gXCJidG5feXhfb3BlblwiKXtcclxuICAgICAgICAgICAgd2luZG93LkF1ZGlvTWdyLnNldFNGWFZvbHVtZSgxLjApO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWb2x1bWUoKTsgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoZXZlbnQudGFyZ2V0Lm5hbWUgPT0gXCJidG5feXhfY2xvc2VcIil7XHJcbiAgICAgICAgICAgIHdpbmRvdy5BdWRpb01nci5zZXRTRlhWb2x1bWUoMCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFZvbHVtZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGV2ZW50LnRhcmdldC5uYW1lID09IFwiYnRuX3l5X29wZW5cIil7XHJcbiAgICAgICAgICAgIHdpbmRvdy5BdWRpb01nci5zZXRCR01Wb2x1bWUoMSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFZvbHVtZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGV2ZW50LnRhcmdldC5uYW1lID09IFwiYnRuX3l5X2Nsb3NlXCIpe1xyXG4gICAgICAgICAgICB3aW5kb3cuQXVkaW9NZ3Iuc2V0QkdNVm9sdW1lKDApO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWb2x1bWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiJdfQ==