{"version":3,"sources":["assets\\scripts\\Chat.js"],"names":["KBEngine","require","cc","Class","Component","properties","_chatRoot","_tabQuick","_tabEmoji","_iptChat","_quickChatInfo","_btnChat","onLoad","window","AudioMgr","node","getChildByName","active","getComponent","EditBox","index","content","sound","getQuickChatInfo","key","onBtnChatClicked","playSFX","onBgClicked","onTabClicked","event","target","name","onQuickChatItemClicked","info","player","app","quick_chat","onEmojiItemClicked","log","emoji","onBtnSendChatClicked","string","iptChat"],"mappings":"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","sourceRoot":"/","sourcesContent":["var KBEngine = require(\"kbengine\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _chatRoot:null,\r\n        _tabQuick:null,\r\n        _tabEmoji:null,\r\n        _iptChat:null,\r\n        \r\n        _quickChatInfo:null,\r\n        _btnChat:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(window.AudioMgr== null){\r\n            return;\r\n        }\r\n        \r\n        //cc.vv.chat = this;\r\n        \r\n        //this._btnChat = this.node.getChildByName(\"btn_chat\");\r\n        //this._btnChat.active = cc.vv.replayMgr.isReplay() == false;\r\n        \r\n        this._chatRoot = this.node.getChildByName(\"chat\");\r\n        this._chatRoot.active = false;\r\n        \r\n        this._tabQuick = this._chatRoot.getChildByName(\"quickchatlist\");\r\n        this._tabEmoji = this._chatRoot.getChildByName(\"emojis\");\r\n        \r\n        this._iptChat = this._chatRoot.getChildByName(\"iptChat\").getComponent(cc.EditBox);\r\n        \r\n        \r\n        this._quickChatInfo = {};\r\n        this._quickChatInfo[\"item0\"] = {index:0,content:\"快点啊，都等到我花儿都谢谢了！\",sound:\"fix_msg_1.mp3\"};\r\n        this._quickChatInfo[\"item1\"] = {index:1,content:\"怎么又断线了，网络怎么这么差啊！\",sound:\"fix_msg_2.mp3\"};\r\n        this._quickChatInfo[\"item2\"] = {index:2,content:\"不要走，决战到天亮！\",sound:\"fix_msg_3.mp3\"};\r\n        this._quickChatInfo[\"item3\"] = {index:3,content:\"你的牌打得也太好了！\",sound:\"fix_msg_4.mp3\"};\r\n        this._quickChatInfo[\"item4\"] = {index:4,content:\"你是妹妹还是哥哥啊？\",sound:\"fix_msg_5.mp3\"};\r\n        this._quickChatInfo[\"item5\"] = {index:5,content:\"和你合作真是太愉快了！\",sound:\"fix_msg_6.mp3\"};\r\n        this._quickChatInfo[\"item6\"] = {index:6,content:\"大家好，很高兴见到各位！\",sound:\"fix_msg_7.mp3\"};\r\n        this._quickChatInfo[\"item7\"] = {index:7,content:\"各位，真是不好意思，我得离开一会儿。\",sound:\"fix_msg_8.mp3\"};\r\n        this._quickChatInfo[\"item8\"] = {index:8,content:\"不要吵了，专心玩游戏吧！\",sound:\"fix_msg_9.mp3\"};\r\n    },\r\n    \r\n    getQuickChatInfo:function(index){\r\n        var key = \"item\" + index;\r\n        return this._quickChatInfo[key];   \r\n    },\r\n    \r\n    onBtnChatClicked:function(){\r\n        window.AudioMgr.playSFX(\"ui_click\")\r\n        this._chatRoot.active = true;\r\n    },\r\n    \r\n    onBgClicked:function(){\r\n        this._chatRoot.active = false;\r\n    },\r\n    \r\n    onTabClicked:function(event){\r\n        window.AudioMgr.playSFX(\"ui_click\")\r\n        if(event.target.name == \"tabQuick\"){\r\n            this._tabQuick.active = true;\r\n            this._tabEmoji.active = false;\r\n        }\r\n        else if(event.target.name == \"tabEmoji\"){\r\n            this._tabQuick.active = false;\r\n            this._tabEmoji.active = true;\r\n        }\r\n    },\r\n    \r\n    onQuickChatItemClicked:function(event){\r\n        window.AudioMgr.playSFX(\"ui_click\")\r\n        this._chatRoot.active = false;\r\n        var info = this._quickChatInfo[event.target.name];\r\n        //cc.vv.net.send(\"quick_chat\",info.index); \r\n        var player = KBEngine.app.player();\r\n        if(player){\r\n            player.quick_chat(info.index)\r\n        }\r\n    },\r\n    \r\n    onEmojiItemClicked:function(event){\r\n        window.AudioMgr.playSFX(\"ui_click\")\r\n        cc.log(event.target.name);\r\n        this._chatRoot.active = false;\r\n        //cc.vv.net.send(\"emoji\",event.target.name);\r\n        var player = KBEngine.app.player();\r\n        if(player){\r\n            player.emoji(event.target.name)\r\n        }\r\n    },\r\n    \r\n    onBtnSendChatClicked:function(){\r\n        window.AudioMgr.playSFX(\"ui_click\")\r\n        this._chatRoot.active = false;\r\n        if(this._iptChat.string == \"\"){\r\n            return;\r\n        }\r\n        //cc.vv.net.send(\"chat\",this._iptChat.string);\r\n        var player = KBEngine.app.player();\r\n        if(player){\r\n            player.iptChat(this._iptChat.string)\r\n        }\r\n        this._iptChat.string = \"\";\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}