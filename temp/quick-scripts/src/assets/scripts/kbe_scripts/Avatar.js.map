{"version":3,"sources":["assets\\scripts\\kbe_scripts\\Avatar.js"],"names":["KBEngine","require","Avatar","Entity","extend","__init__","_super","isPlayer","cc","log","window","wx","undefined","sys","platform","WECHAT_GAME","decodeEncryptedData","Event","fire","onSetSpaceData","encryptedData","localStorage","getItem","iv","baseCall","reqChangeReadyState","cellCall","playerReadyStateChange","eid","state","quick_chat","idx","emoji","name","iptChat","strstr","onquick_chat","onjoinPrivateRoom","num","onemoji","oniptChat","joinRoom","INFO_MSG","id","createPrivateRoom","joinPrivateRoom","roomkey","game_begin_push","holds","onEnterWorld","onEnterWorld2","app","entity_id","startWalk","moveFlag","onStartWalk","stopWalk","pos","x","y","vec3","Vector3","z","onStopWalk","v2","Vec2","jump","onJump","rightJump","onRightJump","leftJump","onLeftJump","onPickUpItem","itemID","positon","point","pickUpItem","throwItem","force","onThrowItem","onNewTurn","second","card1","card2","card3","card4","onsureact","strr","onsyncsureact","newTurn","recoverItem","onRecoverItem","recvDamage","onRecvDamage","avatarID","harm","hp","onupdateGamestates","curID","time","onotherNetcut","onDie","onGameOver","isWin","hitRate","totalTime","totalHarm","score","toString","updategamestuts","resetItem","uploaditempos","itempos","onResetItem","position","addItem","left","continueGame","onContinueGame"],"mappings":"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","sourceRoot":"/","sourcesContent":["/*-----------------------------------------------------------------------------------------\r\n\t\t\t\t\t\t\t\t\t\t\t\tentity\r\n-----------------------------------------------------------------------------------------*/\r\n\r\nvar KBEngine = require(\"kbengine\");\r\n\r\nKBEngine.Avatar = KBEngine.Entity.extend({\r\n        __init__ : function()\r\n        {\r\n            this._super();\r\n            if(this.isPlayer()) {\r\n                cc.log(\"window.wx != undefined || window.wc=\",window.wx != undefined)\r\n                if(cc.sys.platform == cc.sys.WECHAT_GAME){\r\n                    this.decodeEncryptedData();\r\n                }                   \r\n                cc.log(\"KBEngine.Avatar._init_\")\r\n                KBEngine.Event.fire(\"enterScene\");\r\n            }\r\n        },\r\n        onSetSpaceData:function(){\r\n            cc.log(\"initSpaceDatainitSpaceDatainitSpaceDatainitSpaceData\")\r\n            KBEngine.Event.fire(\"onSetSpaceData\");\r\n\r\n        },\r\n        decodeEncryptedData: function()\r\n        {\r\n            var encryptedData = cc.sys.localStorage.getItem(\"encryptedData\");\r\n            var iv = cc.sys.localStorage.getItem(\"iv\");\r\n            cc.log(\"encryptedData && iv\",encryptedData , iv)\r\n            if(encryptedData && iv) {\r\n                cc.log(\"decodeEncryptedData\")\r\n                this.baseCall(\"decodeEncryptedData\", encryptedData, iv);\r\n            }\r\n        },\r\n        reqChangeReadyState:function(){\r\n            this.cellCall(\"reqChangeReadyState\",1);\r\n        },\r\n        playerReadyStateChange:function(eid,state){\r\n            if(this.isPlayer()) {\r\n                KBEngine.Event.fire(\"playerReadyStateChange\", eid,state);\r\n            }\r\n\r\n        },\r\n        quick_chat:function(idx){\r\n            cc.log(\"quick_chat:cellCall\",idx)\r\n            this.cellCall(\"quick_chat\",idx);\r\n        },\r\n        emoji:function(name){\r\n            cc.log(\"emoji:cellCall\",name)\r\n            this.cellCall(\"emoji\",name);\r\n        },\r\n        iptChat:function(strstr){\r\n            cc.log(\"iptChat:cellCall\",strstr)\r\n            this.cellCall(\"iptChat\",strstr);\r\n        },\r\n        onquick_chat:function(eid,idx){\r\n            cc.log(\"quick_chat:receive\",eid,idx)\r\n            if(this.isPlayer()) {\r\n                KBEngine.Event.fire(\"onquick_chat\", eid,idx);\r\n            }\r\n        },\r\n        onjoinPrivateRoom:function(num){\r\n            cc.log(\"onjoinPrivateRoom\", num)\r\n            if(this.isPlayer()) {\r\n                KBEngine.Event.fire(\"onjoinPrivateRoom\", num);\r\n            }\r\n        },\r\n        onemoji:function(eid,name){\r\n            cc.log(\"emoji:receive\",eid,name)\r\n            if(this.isPlayer()) {\r\n                KBEngine.Event.fire(\"onemoji\", eid,name);\r\n            }\r\n        },\r\n        oniptChat:function(eid,strstr){\r\n            cc.log(\"iptChat:receive\",eid,strstr)\r\n            if(this.isPlayer()) {\r\n                KBEngine.Event.fire(\"oniptChat\", eid,strstr);\r\n            }\r\n        },\r\n        joinRoom: function()\r\n        {\r\n            KBEngine.INFO_MSG(\"avatar \" + this.id + \" join room\");\r\n            this.baseCall(\"joinRoom\");\r\n        },\r\n        createPrivateRoom: function()\r\n        {\r\n            KBEngine.INFO_MSG(\"avatar \" + this.id + \" createPrivateRoom\");\r\n            this.baseCall(\"createPrivateRoom\");\r\n        },\r\n        joinPrivateRoom: function(roomkey)\r\n        {\r\n            KBEngine.INFO_MSG(\"avatar \" + this.id + \" joinPrivateRoom\"+ roomkey);\r\n            this.baseCall(\"joinPrivateRoom\",roomkey);\r\n        },\r\n        game_begin_push:function(holds)   {\r\n            cc.log(\"Avatar::game_begin_push\")\r\n            if(this.isPlayer()) {\r\n                KBEngine.Event.fire(\"game_begin_push\",this);\r\n            }\r\n        },\r\n        onEnterWorld : function()\r\n        {\r\n            cc.log(\"avatar.onEnterWorld.......\")\r\n            this._super();\r\n            if(this.isPlayer()) {\r\n                KBEngine.Event.fire(\"onAvatarEnterWorld\", this);\r\n            }\t\t\r\n        },\r\n        onEnterWorld2 : function(eid)\r\n        {\r\n            cc.log(\"avatar.onEnterWorld2.......\",this.id , KBEngine.app.entity_id)\r\n\r\n            //this._super();\r\n            if(this.isPlayer()) {\r\n                KBEngine.Event.fire(\"onEnterWorld2\", eid);\r\n            }\t\t\r\n        },\r\n\r\n        startWalk: function(moveFlag)\r\n        {\r\n            KBEngine.INFO_MSG(\"avatar \" + this.id + \" start walk: \" + moveFlag);\r\n            this.cellCall(\"startWalk\", moveFlag);\r\n        },\r\n\r\n        onStartWalk: function(moveFlag)\r\n        {\r\n            KBEngine.INFO_MSG(\"other avatar \" + this.id + \" on start walk: \" + moveFlag);\r\n            KBEngine.Event.fire(\"otherAvatarOnStartWalk\", this.id, moveFlag);\r\n        },\r\n\r\n        stopWalk: function(pos)\r\n        {\r\n            cc.log(\"avatar %d stop walk, pos(%f, %f)\", this.id, pos.x, pos.y);   \r\n            var vec3 = new KBEngine.Vector3();\r\n            vec3.x = pos.x;\r\n            vec3.y = pos.y;\r\n            vec3.z = 0.0;\r\n            this.cellCall(\"stopWalk\", pos);\r\n        },\r\n\r\n        onStopWalk: function(pos)\r\n        {\r\n            var v2 = new cc.Vec2();\r\n            v2.x = pos.x;\r\n            v2.y = pos.y;\r\n            cc.log(\"other avatar %d stop walk, pos(%f, %f)\", this.id, v2.x, v2.y);   \r\n            KBEngine.Event.fire(\"otherAvatarOnStopWalk\", this.id, v2);\r\n        },\r\n\r\n        jump : function()\r\n\t    {\r\n            cc.log(\"avatar %d cell jump\", this.id);\r\n\t\t    this.cellCall(\"jump\");\r\n        }, \r\n\r\n        onJump : function()\r\n\t    {\r\n            cc.log(\"other avatar %d on jump\", this.id);\r\n\t\t    KBEngine.Event.fire(\"otherAvatarOnJump\", this);\r\n        }, \r\n\r\n        rightJump: function()\r\n        {\r\n            this.cellCall(\"rightJump\");\r\n            KBEngine.INFO_MSG(\"avatar \" + this.id + \" right jump\");\r\n        },\r\n\r\n        onRightJump: function()\r\n        {\r\n            KBEngine.Event.fire(\"otherAvatarOnRightJump\", this.id);\r\n        },\r\n\r\n        leftJump: function()\r\n        {\r\n            this.cellCall(\"leftJump\");\r\n            KBEngine.INFO_MSG(\"avatar \" + this.id + \" left jump\");\r\n        },\r\n\r\n        onLeftJump: function()\r\n        {\r\n            KBEngine.Event.fire(\"otherAvatarOnLeftJump\", this.id);\r\n        },\r\n\r\n        onPickUpItem : function(itemID, positon)\r\n        {\r\n            var point = new cc.Vec2(positon.x, positon.y);\r\n            KBEngine.Event.fire(\"otherAvatarOnPickUpItem\", this.id, itemID, point);\r\n        },\r\n\r\n        pickUpItem : function(itemID, pos)\r\n\t    {\r\n            var vec3 = new KBEngine.Vector3();\r\n            vec3.x = pos.x;\r\n            vec3.y = pos.y;\r\n            vec3.z = 0.0;\r\n            this.cellCall(\"pickUpItem\", itemID, vec3);\r\n        }, \r\n        //把力道给每个客户端，根本不会记录最终位置坐标到服务器，所以断线重连后Item的位置坐标都是起始值            \r\n        throwItem : function(itemID, force)  \r\n        {\r\n            var vec3 = new KBEngine.Vector3();\r\n            vec3.x = force.x;\r\n            vec3.y = force.y;\r\n            vec3.z = 0.0;\r\n            this.cellCall(\"throwItem\", itemID, vec3);\r\n        },\r\n         \r\n        onThrowItem : function(itemID, force)\r\n        {\r\n            var v2 = new cc.Vec2(force.x, force.y);\r\n            KBEngine.Event.fire(\"otherAvatarThrowItem\", this.id, itemID, v2);\r\n        },\r\n\r\n        onNewTurn : function(eid,second,card1,card2,card3,card4)\r\n\t    {\r\n            KBEngine.INFO_MSG(\"avatar \" + eid + \" on new turn\");\r\n\t\t    KBEngine.Event.fire(\"newTurn\", this,eid,second,card1,card2,card3,card4);\r\n        }, \r\n        onsureact:function(strr){\r\n            this.cellCall(\"onsureact\", strr);\r\n        },\r\n        onsyncsureact:function(eid , strr){\r\n            cc.log(\"avatar::onsyncsureact== \", strr);\r\n            //KBEngine.Event.fire(\"onsyncsureact\", strr);\r\n            if(this.isPlayer()) {\r\n                KBEngine.Event.fire(\"oniptChat\", eid,strr);\r\n            }\r\n\r\n        },\r\n        newTurn : function()\r\n\t    {\r\n            this.cellCall(\"newTurn\");\r\n        }, \r\n\r\n        //捡起石头，时间到了，不扔石头，就还原石头的位置\r\n        recoverItem: function(itemID)\r\n        {\r\n            this.cellCall(\"recoverItem\", itemID);\r\n        },\r\n\r\n        onRecoverItem: function(itemID)\r\n        {\r\n            KBEngine.Event.fire(\"otherAvatarRecoverItem\", this.id, itemID);\r\n        },\r\n\r\n        recvDamage: function(itemID)\r\n        {\r\n            this.cellCall(\"recvDamage\", itemID);\r\n            KBEngine.INFO_MSG(\"avatar \" + this.id + \" recvDamage from item=\" + itemID);\r\n        },\r\n\r\n        onRecvDamage: function(avatarID, harm, hp)\r\n        {\r\n            KBEngine.INFO_MSG(\"avatar \" + avatarID + \" recv harm=\" + harm + \" hp=\" + hp);\r\n            KBEngine.Event.fire(\"onRecvDamage\", avatarID, harm, hp);\r\n        },\r\n        onupdateGamestates:function(curID,time){\r\n            KBEngine.INFO_MSG(\"onupdateGamestates \" + curID + \"/\" + time);\r\n            KBEngine.Event.fire(\"onupdateGamestates\", curID,time);\r\n        },\r\n        onotherNetcut: function(avatarID)\r\n        {\r\n            KBEngine.INFO_MSG(\"avatar \" + avatarID + \" Netcut\");\r\n            KBEngine.Event.fire(\"onotherNetcut\", avatarID);\r\n        },\r\n        onDie: function(avatarID)\r\n        {\r\n            KBEngine.INFO_MSG(\"avatar \" + avatarID + \" die\");\r\n            KBEngine.Event.fire(\"onAvatarDie\", avatarID);\r\n        },\r\n\r\n        onGameOver: function(isWin, hitRate, totalTime, totalHarm, score)\r\n        {\r\n            KBEngine.INFO_MSG(\"Game is over: avatar \" + this.id + \"win= \" + isWin.toString());\r\n            KBEngine.Event.fire(\"onGameOver\", this.id, isWin, hitRate, totalTime, totalHarm, score);\r\n        },\r\n        updategamestuts:function(num){\r\n            KBEngine.Event.fire(\"updategamestuts\",num);\r\n        },\r\n        //石头出界，重置石头\r\n        resetItem: function(itemID)\r\n        {\r\n            KBEngine.INFO_MSG(\"reset item ......\");\r\n            this.cellCall(\"resetItem\", itemID);\r\n        },\r\n        uploaditempos: function(itemID,itempos)\r\n        {\r\n            KBEngine.INFO_MSG(\"uploaditempos ......\");\r\n            this.cellCall(\"uploaditempos\", itemID,itempos);\r\n        },\r\n\r\n        onResetItem: function(itemID, position)\r\n        {\r\n            KBEngine.INFO_MSG(\"on reset item position(\" + position.x + \", \" + position.y + \", \" + position.z + \")\");\r\n            KBEngine.Event.fire(\"onResetItem\", itemID, position);\r\n        },\r\n\r\n        //没石头扔，就产生石头\r\n        addItem: function(left)\r\n        {\r\n            KBEngine.INFO_MSG(\"add item ......: \" + left.toString());\r\n            this.cellCall(\"addItem\", left);\r\n        },\r\n\r\n        continueGame: function()\r\n        {\r\n            this.cellCall(\"continueGame\");\r\n            KBEngine.INFO_MSG(\"avatar \" + this.id + \" continue game\");\r\n        },\r\n\r\n        onContinueGame: function(avatarID)\r\n        {\r\n            KBEngine.INFO_MSG(\"avatar \" + avatarID + \"on continue game, local avatarID=\" + this.id);\r\n            //KBEngine.Event.fire(\"onAvatarEnterWorld\", KBEngine.app.entity_uuid, this.id, this);\r\n            KBEngine.Event.fire(\"onAvatarEnterWorld\",this);\r\n        },\r\n\r\n       \r\n    });\r\n    \r\n    \r\n    "]}